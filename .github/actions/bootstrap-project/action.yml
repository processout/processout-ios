name: Bootstrap Project
description: Pulls needed dependencies and bootstraps project
inputs:
  test-project-constants:
    description: 'Content of test project constants file'
    type: string
    required: false
runs:
  using: "composite"
  steps:
    - uses: ruby/setup-ruby@v1
      with:
        ruby-version: '3.1.2'
        bundler-cache: true
    - name: Install Mint
      run: brew update && brew install mint
      shell: bash
    - name: Cache Mint Packages
      uses: actions/cache@v3
      with:
        path: ~/.mint/packages
        key: ${{ runner.os }}-mint-${{ hashFiles('**/Mintfile') }}
        restore-keys: |
          ${{ runner.os }}-mint-
    - name: Write Constants
      run: |
        CONSTANTS="${{ inputs.test-project-constants }}"
        echo $CONSTANTS > Tests/ProcessOutTests/Resources/Constants.yml
        echo $CONSTANTS > Example/Example/Resources/Constants.yml
      shell: bash
    - name: Bootstrap Project
      run: ./Scripts/BootstrapProject.sh --skip-bundle-instal
      shell: bash
    # - name: Bootstrap Example Project
    #   if: ${{ inputs.test-project-constants != '' }}
    #   run: cd Example && ./Scripts/BootstrapProject.sh --skip-mint-bootstrap
    #   shell: bash
